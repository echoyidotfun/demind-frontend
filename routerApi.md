Sonic

### 1. Navi (microswap)

#### route接口：用于获取报价

method： GET
https://swap-api.navigator.exchange/sonic/v2/route?amount={$scaled_amount}&receiver={$recipient}&from={$from_token_address}&to={$to_token_address}&slippage={$slippage}&source=microswap
必需参数：

- amount： 交易的token in的数量，经过decimal标准化
- from：token in
- to： token out
  可选参数：
- slippage：滑点，影响response中的minAmountOut，默认是0.01也就是1%滑点
- dexes: 接入哪些dexes，不传就是全选，这里先默认全选
  &dexes=beets,curve,defive,dyorswap,equalizer,metropolis,mobius,navigator,shadowexchangev2,shadowexchangev3,silverswap,solidlyv3,sonicmarket,spookyswap,spookyswapv3,sushiswap,sushiswapv3,swapxv2,swapxv3,thick,uniswapv3,wagmi,amped

##### 样例

请求：
https://swap-api.navigator.exchange/sonic/v2/route?amount=50000000000000000000&from=0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee&to=0x3333111a391cc08fa51353e9195526a70b333333
from： S（native sonic token）
to：x33

响应：

```json
{
  "from": "0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",

  "to": "0x3333111a391cc08fa51353e9195526a70b333333",

  "totalFrom": "50000000000000000000",

  "totalFromUsd": 26.74140744323123,

  "totalTo": "1124559190827844389",

  "totalToUsd": 26.476838045899992,

  "minAmountOut": "1113313598919565946",

  "paths": [
    {
      "amountFrom": "49975000000000000000",

      "amountTo": "1124559190827844389",

      "swaps": [
        {
          "from": "0x039e2fB66102314Ce7b64Ce5Ce3E5183bc94aD38",

          "to": "0x29219dd400f2Bf60E5a23d13Be72B486D4038894",

          "amountFrom": "49975000000000000000",

          "amountTo": "26745842",

          "pool": "0x67bcED305725349783d986362Af4092252A7F51A",

          "dex": "solidlyv3",

          "type": "uniswapv3"
        },

        {
          "from": "0x29219dd400f2Bf60E5a23d13Be72B486D4038894",

          "to": "0x3333111A391cC08fa51353E9195526A70b333333",

          "amountFrom": "26745842",

          "amountTo": "1124559190827844389",

          "pool": "0xE8b696fB500c2a3B1FAa5e0fce4d53D6ad26765F",

          "dex": "shadowexchangev2",

          "type": "solidly"
        }
      ]
    }
  ]
}
```

从response中可以得到的关键数据：
"totalTo": "1124559190827844389", 需要根据decimal转换成方便人类理解的数量。
"minAmountOut": "1113313598919565946",根据滑点算出的最小获得数量。

#### swap接口：用于获取交易data

method： GET
https://swap-api.navigator.exchange/sonic/v2/swap?amount=50000000000000000000&receiver=0x9A01CE1eCbb36E4f3892c94F6243a4E27E5Ce3DE&from=0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee&to=0x3333111a391cc08fa51353e9195526a70b333333
必需参数：

- amount： 交易的token in的数量，经过decimal标准化
- from：token in
- to： token out
- receiver：接收token out代币的地址，一帮情况下就是发起交易的地址
  可选参数：
- slippage：滑点，影响response中的minAmountOut，默认是0.01也就是1%滑点
- dexes: 接入哪些dexes，不传就是全选，这里先默认全选
  &dexes=beets,curve,defive,dyorswap,equalizer,metropolis,mobius,navigator,shadowexchangev2,shadowexchangev3,silverswap,solidlyv3,sonicmarket,spookyswap,spookyswapv3,sushiswap,sushiswapv3,swapxv2,swapxv3,thick,uniswapv3,wagmi,amped

##### 响应样例：

```json
{
  "quote": {
    "from": "0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",

    "to": "0x3333111a391cc08fa51353e9195526a70b333333",

    "totalFrom": "50000000000000000000",

    "totalFromUsd": 26.781248686590878,

    "totalTo": "352386095189317619",

    "totalToUsd": 8.296646053007072,

    "minAmountOut": "348862234237424443",

    "paths": [
      {
        "amountFrom": "49975000000000000000",

        "amountTo": "352386095189317619",

        "swaps": [
          {
            "from": "0x039e2fB66102314Ce7b64Ce5Ce3E5183bc94aD38",

            "to": "0x3333111A391cC08fa51353E9195526A70b333333",

            "amountFrom": "49975000000000000000",

            "amountTo": "352386095189317619",

            "pool": "0x8E2380cB4929f1968A0fF9F7C2d2CF6b86959b7C",

            "dex": "equalizer",

            "type": "solidly"
          }
        ]
      }
    ]
  },

  "encodedData": {
    "router": "0x097DF2e7a99633EFEa9560E1B6873AE9DB6669EB",

    "data": "0xf970cf640000000000000000000000003ff3d13f79de927c9113ca4d37ff743f0b486b6c00000000000000000000000000000000000000000000000000000000000000600000000000000000000000000000000000000000000000000000000000000200000000000000000000000000eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee0000000000000000000000003333111a391cc08fa51353e9195526a70b3333330000000000000000000000003ff3d13f79de927c9113ca4d37ff743f0b486b6c0000000000000000000000009a01ce1ecbb36e4f3892c94f6243a4e27e5ce3de000000000000000000000000000000000000000000000002b5e3af16b188000000000000000000000000000000000000000000000000000004d7685a8b45533b0000000000000000000000000000000000000000000000000000000000000140000000000000000000000000000000000000000000000000000000000000016000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000180000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000030000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000120000000000000000000000000eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee0000000000000000000000003333111a391cc08fa51353e9195526a70b33333300000000000000000000000000000000000000000000000004d7685a8b45533b0000000000000000000000000000000000000000000000000000000000000004ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff0000000000000000000000009a01ce1ecbb36e4f3892c94f6243a4e27e5ce3de00000000000000000000000000000000000000000000000000000000680f695100000000000000000000000000000000000000000000000000000000000002a000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000040000000000000000000000000000000000000000000000000000000000000090000000000000000000000000000000000000000000000000000000000000000a00000000000000000000000008e2380cb4929f1968a0ff9f7c2d2cf6b86959b7c000000000000000000000000039e2fb66102314ce7b64ce5ce3e5183bc94ad380000000000000000000000003333111a391cc08fa51353e9195526a70b333333000000000000000000000000000000000000000000000002b58addb89a258000000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000027b7d000000000000000000000000000000000000000000000000000000000000"
  }
}
```

从response中可以得到的关键数据：
router：聚合器地址
data：交易的calldata
由此构建交易：
from：发起交易的用户地址（=receiver）
to：router，
data：data
value：当token from为native token时，value=swap amount，其他情况下value=0

#### 2. Magpie

#### 3. Odos
